<!doctype html>

<html lang="en">
  <head>
    <title>Chris Cummins | Grow Your Own Picture - Evolution Simulator</title>
    <meta name="description" content="Harnessing the powers of natural selection and genetics algorithms to produce unique generative art.">
    <meta name="author" content="Chris Cummins">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=1024" />
    <meta charset="utf-8" />

    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=PT+Serif:400,700" />
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.no-icons.min.css" />
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/3.1.0/css/font-awesome.css" />
    <link rel="stylesheet" href="//code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
    <link rel="stylesheet" href="/assets/css/buttons.css" />
    <link rel="stylesheet" href="/assets/css/static-700.css" />
    <link rel="stylesheet" href="/assets/css/genetics.css" />
    <link rel="shortcut icon" href="/assets/img/favicon.ico" />
  </head>

  <body class="genetics-inactive">

    <!-- Google Analytics -->
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-40829804-1']);
      _gaq.push(['_trackPageview']);

      (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>

    <div class="column">

      <!-- title -->
      <div class="page-title">Grow your own picture</div>
      <hr class="page-title-hr">

      <!-- pictures -->
      <div id="pictureframe">
        <canvas id="referenceCanvas" class="picture" width="350" height="350" style="margin-right: 4px;"></canvas>
        <canvas id="outputCanvas" class="picture" width="350" height="350" style="margin-left: 4px;"></canvas>
      </div>

      <!-- button bar -->
      <center>
        <div class="btn-toolbar">
          <div class="btn-group">

            <!-- image dropdown -->
            <a class="btn dropdown-toggle btn-inverse" data-toggle="dropdown"
               href="#" style="border-top-right-radius: 0px; border-bottom-right-radius: 0px;">
              Select Image &nbsp;<span class="caret"></span>
            </a>
            <ul id="stock-image-menu" class="dropdown-menu" style="text-align: start;">
              <li><a href="#">Mona Lisa</a></li>
              <li><a href="#">Kyle Broflovski</a></li>
              <li><a href="#">Marilyn Monroe</a></li>
              <li><a href="#">Tom Waits</a></li>
              <li><a href="#">Piet Mondrian</a></li>
              <li><a href="#">Eiffel Tower</a></li>
              <li><a href="#">Sunflowers</a></li>
            </ul>

            <!-- webcam button -->
            <button id="webcam-upload-btn" class="btn btn-inverse">
              Webcam <i class="icon-camera"></i></button>

          </div>

          <button id="start" class="btn control-btn btn-success"
                  style="margin-left: 150px;">Start</button>

          <button id="stop" class="btn control-btn btn-danger">Stop</button>
        </div>
      </center>

        <div class="tabbable tabs-left" style="margin-top: 30px;">
          <ul class="nav nav-tabs" style="margin-right: 0px;">

            <li class="active"><a href="#pane-about" data-toggle="tab">
                <i class="icon-info-sign icon-large"></i> About</a></li>

            <li><a href="#pane-configuration" data-toggle="tab">
                <i class="icon-cog icon-large"></i> Configuration</a></li>

            <li><a href="#pane-analytics" data-toggle="tab">
                <i class="icon-beaker icon-large"></i> Analytics</a></li>

            <li><a href="#pane-results" data-toggle="tab">
                <i class="icon-book icon-large"></i> Results</a></li>
          </ul>

          <div class="tab-content">
            <div id="pane-about" class="tab-pane active well">

              Welcome! Click start to see genetics in action, as a randomly
              generated collection of shapes evolve to resemble a given
              picture. You can select the image to use from a collection of
              pre-chosen images, or supply your own by taking a picture with the
              webcam on your device.

              <h4>Evolving the Mona Lisa</h4>

              This page uses a genetic algorithm to model a population of
              individuals, each containing a string of DNA which can be
              visualised in the form of an image. By starting with a population
              consisting of a randomly generated gene pool, each individual is
              compared against the reference image (the one on the left), and
              the individuals can then be ranked by their likeness to it, known
              as their "fitness", with the best fit being displayed on the
              output image (the one on the right). By breeding the fittest
              individuals from the population, the DNA which produces the most
              accurate representation of the reference image is selected over
              successive generations, effectively demonstrating the power of a
              natural selection process to produce the best candidate for any
              given environment.

              <h4>Source Code</h4>

              As with all good things in life, this was created for fun, free,
              and science. The full source code for this site is available on
              <a href="https://github.com/ChrisCummins/chriscummins.cc"
              target="_blank">GitHub</a> and is released under the terms of the
              MIT License. If you just want to see how the genetics algorithm
              works, you can see the JavaScript
              implementation <a href="https://github.com/ChrisCummins/chriscummins.cc/blob/master/assets/js/genetics.js.in"
              target="_blank">here</a>.

              <h4>Bugs, comments and improvements</h4>

              I would love to hear your feedback. Don't be afraid of
              <a href="http://chriscummins.cc/#overview" target="_blank">sending
              me a message</a> with any thoughts and suggestions.  If you would
              like to be a little more involved in the process, please open an
              issue on
              the <a href="https://github.com/ChrisCummins/chriscummins.cc/issues"
              target="_blank">website bug tracker</a>.  To contribute to the
              code, you can fork the source code repository and submit a pull
              request when ready.

            </div>

            <div id="pane-configuration" class="tab-pane well">

              <!-- configuration synopsis -->
              <div class="alert alert-info">
                <a href="#" class="close" data-dismiss="alert">&times;</a>
                This tab enables you to configure the parameters to be used for
                the genetics simulation.
              </div>

              <center><h4>Genetics</h4></center>

              <table class="table conf-table">

                <tr data-toggle="tooltip"
                    title="The number of individuals in a single generation">
                  <td style="width: 160px;">
                    Population Size
                  </td>
                  <td><div id="population-size-slider" class="conf-slider"></div></td>
                  <td id="population-size" style="width: 80px;"></td>
                <tr/>

                <tr data-toggle="tooltip"
                    title="The percentage of the population which is selected for breeding the next generation">
                  <td>
                    Selection Cutoff
                  </td>
                  <td><div id="cutoff-slider" class="conf-slider"></div></td>
                  <td id="cutoff"></td>
                <tr/>

                <tr data-toggle="tooltip"
                    title="The chance that each DNA string will mutate per generation">
                  <td>
                    Mutation Chance
                  </td>
                  <td><div id="mutation-chance-slider" class="conf-slider"></div></td>
                  <td id="mutation-chance"></td>
                <tr/>

                <tr data-toggle="tooltip"
                    title="The amount of random data that is introduced in a mutation">
                  <td>
                    Mutation Amount
                  </td>
                  <td><div id="mutation-amount-slider" class="conf-slider"></div></td>
                  <td id="mutation-amount"></td>
                <tr/>

                <tr data-toggle="tooltip"
                    title="Whether the parents of each generation are killed or survive">
                  <td>
                    Kill Parents
                  </td>
                  <td></td>
                  <td><label>
                      <input id="killparents" class="ios-switch"
                             type="checkbox" />
                  </label></td>
                <tr/>

                <tr data-toggle="tooltip"
                    title="Inherit genes randomly from mother and father or an even share of both">
                  <td>
                    Random Inheritance
                  </td>
                  <td></td>
                  <td><label>
                      <input id="random-inheritance" class="ios-switch"
                             type="checkbox" />
                  </label></td>
                <tr/>

                <tr data-toggle="tooltip"
                    title="Linear or exponential fitness algorithm">
                  <td>
                    Difference squared
                  </td>
                  <td></td>
                  <td><label>
                      <input id="diff-squared" class="ios-switch"
                             type="checkbox" />
                  </label></td>
                <tr/>

              </table>

              <!-- graphics settings -->
              <center><h4>Graphics</h4></center>

              <table class="table conf-table">

                <tr data-toggle="tooltip"
                    title="A higher internal resolution improves accuracy, but slows performance">
                  <td style="width: 160px;">
                    Internal Resolution
                  </td>
                  <td><div id="resolution-slider" class="conf-slider"></div></td>
                  <td id="resolution" style="width: 80px;"></td>
                <tr/>

                <tr data-toggle="tooltip"
                    title="More polygons means more visual detail, but slower performance">
                  <td>
                    Number of polygons
                  </td>
                  <td><div id="polygons-slider" class="conf-slider"></div></td>
                  <td id="polygons"></td>
                <tr/>

                <tr data-toggle="tooltip"
                    title="The number of sides that each polygon has">
                  <td>
                    Number of vertices
                  </td>
                  <td><div id="vertices-slider" class="conf-slider"></div></td>
                  <td id="vertices"></td>
                <tr/>

                <tr data-toggle="tooltip"
                    title="Draw solid shapes or traced lines">
                  <td>
                    Fill polygons
                  </td>
                  <td></td>
                  <td><label>
                      <input id="fill-polygons" class="ios-switch"
                             type="checkbox" />
                  </label></td>
                <tr/>

              </table>
            </div>

            <div id="pane-analytics" class="tab-pane well">

              <div class="alert alert-info">
                <a href="#" class="close" data-dismiss="alert">&times;</a>
                This tab shows real time data from a running simulation.
              </div>

              <h4>Real Time Analysis</h4>

              <table id="analytics-table"
                     class="table table-bordered table-striped">
                <tr>
                  <td>Elapsed time</td>
                  <td id="elapsed-time"></td>
                </tr>
                <tr>
                  <td>Number of generations</td>
                  <td id="number-of-generations"></td>
                </tr>
                <tr>
                  <td>Average time per generation</td>
                  <td id="time-per-generation"></td>
                </tr>
                <tr>
                  <td>Average time per improvement</td>
                  <td id="time-per-improvement"></td>
                </tr>
                <tr>
                  <td>Current fitness</td>
                  <td id="current-fitness"></td>
                </tr>
                <tr>
                  <td>Highest fitness</td>
                  <td id="highest-fitness"></td>
                </tr>
                <tr>
                  <td>Lowest fitness</td>
                  <td id="lowest-fitness"></td>
                </tr>
              </table>

            </div>

            <div id="pane-results" class="tab-pane well">

              <div class="alert alert-info">
                <a href="#" class="close" data-dismiss="alert">&times;</a>
                This tab shows you the results of a simulation when paused.
              </div>

              <h4>DNA string of strongest individual</h4>
              <textarea id="strongest-dna" class="text" readonly></textarea>

            </div>

          </div> <!-- /.tab-content -->
        </div> <!-- /.tabbale -->

        <hr class="footer-hr">
        <div class="footer">
          <a href="/">chriscummins.cc</a> |
          &copy; 2013 Chris Cummins
        </div>
    </div>

    <!-- The hidden bits: -->
    <img id="referenceImage"
         src="/genetics/mona-lisa.jpg"
         style="display: none;" />

    <canvas id="workingCanvas"
            width="1" height="1"
            style="display: none;"></canvas>

    <form id="image-upload-form"
          action="image-upload.php"
          method="post" enctype="multipart/form-data">
      <input id="file-chooser" type="file" name="file" accept="image/*" />
    </form>

    <div class="underlay"></div>

    <!-- TODO: not yet implemented -->
    <!-- <div id="null" style="display: none;"></div> -->

    <!-- the webcam uploading section -->
    <div class="webcam-overlay">

      <center>
        <!-- webcam preview window -->
        <div id="webcam-preview"></div>

        <!-- webcam buttons -->
        <form style="margin-top: 10px">
          <input class="btn btn-inverse" type=button value="Configure"
                 onClick="webcam.configure()">
          &nbsp;&nbsp;
          <input id="webcam-snap-button" class="btn btn-inverse"
                 type=button value="Take Snapshot">
        </form>
      </center>

    </div>

  </body>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
  <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
  <script src="/assets/js/webcam.js"></script>
  <script src="/assets/js/genetics.js"></script>

</html>
