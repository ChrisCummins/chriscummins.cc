<!doctype html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=1024" />
    <meta name="apple-mobile-web-app-capable" content="yes" />

    <link href="http://fonts.googleapis.com/css?family=PT+Serif:400,700" rel="stylesheet" />
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.no-icons.min.css" rel="stylesheet">
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.1.0/css/font-awesome.css" rel="stylesheet">
    <link href="/assets/css/buttons.css" rel="stylesheet" />
    <link href="/assets/css/genetics.css" rel="stylesheet" />
    <link href="/assets/img/favicon.ico" rel="shortcut icon" />

    <title>Chris Cummins | Genetics</title>
  </head>

  <body class="genetics-inactive">

    <!-- Google Analytics -->
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-40829804-1']);
      _gaq.push(['_trackPageview']);

      (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>

    <div class="column">

      <!-- title -->
      <div class="page-title">Grow your own picture</div>
      <hr style="margin-top: 30px; margin-bottom: 25px;">

      <!-- pictures -->
      <div id="pictureframe">
        <canvas id="referenceCanvas" class="picture" width="350" height="350" style="margin-right: 4px;"></canvas>
        <canvas id="outputCanvas" class="picture" width="350" height="350" style="margin-left: 4px;"></canvas>
      </div>

      <!-- button bar -->
      <center>
        <div class="btn-toolbar">
          <div class="btn-group">

	    <!-- image dropdown -->
            <a class="btn dropdown-toggle btn-inverse" data-toggle="dropdown"
               href="#" style="border-top-right-radius: 0px; border-bottom-right-radius: 0px;">
              Select Image &nbsp;<span class="caret"></span>
            </a>
            <ul id="stock-image-menu" class="dropdown-menu" style="text-align: start;">
              <li><a href="#">Mona Lisa</a></li>
              <li><a href="#">Kyle Broflovski</a></li>
              <li><a href="#">Marilyn Monroe</a></li>
              <li><a href="#">Tom Waits</a></li>
              <li><a href="#">Piet Mondrian</a></li>
              <li><a href="#">Eiffel Tower</a></li>
              <li><a href="#">Sunflowers</a></li>
            </ul>

	    <!-- webcam button -->
            <button id="webcam-upload-btn" class="btn btn-inverse">
	      Webcam <i class="icon-camera"></i></button>

	    <!-- TODO: upload button -->
            <!-- <button class="btn btn-inverse disabled" -->
	    <!-- 	    onclick="$('#file-chooser').click();"> -->
	    <!--   Upload <i class="icon-folder-open"></i></button> -->

          </div>

          <button id="start" class="btn control-btn btn-success"
                  style="margin-left: 150px;">Start</button>

          <button id="stop" class="btn control-btn btn-danger">Stop</button>
        </div>
      </center>

        <div class="tabbable tabs-left" style="margin-top: 30px;">
          <ul class="nav nav-tabs" style="margin-right: 0px;">

            <li class="active"><a href="#pane-about" data-toggle="tab">
                <i class="icon-info-sign icon-large"></i> About</a></li>

            <li><a href="#pane-configuration" data-toggle="tab">
                <i class="icon-cog icon-large"></i> Configuration</a></li>

            <li><a href="#pane-analytics" data-toggle="tab">
                <i class="icon-beaker icon-large"></i> Analytics</a></li>

            <li><a href="#pane-results" data-toggle="tab">
                <i class="icon-book icon-large"></i> Results</a></li>
          </ul>

          <div class="tab-content">
            <div id="pane-about" class="tab-pane active well">

	      Welcome! Click Start to see a randomly generated collection of
	      shapes evolve into the picture on the left. You can select the
	      image to use from a collection of pre-chosen images, or supply
	      your own by taking a picture with the webcam on your device.

              <h4>Evolving the Mona Lisa</h4>

	      This page uses a genetic algorithm to model a population of
	      individuals, each containing a string of DNA which can be
	      visualised in the form of an image. By starting with a population
	      consisting of a randomly generated gene pool, each individual is
	      compared against the reference image (the one on the left), and
	      the individuals can then be ranked by their likeness to it, known
	      as their "fitness", with the best fit being displayed on the
	      output image (the one on the right). By breeding the fittest
	      individuals from the population, the DNA which produces the most
	      accurate representation of the reference image is selected over
	      successive generations, effectively demonstrating the power of a
	      natural selection process to produce the best candidate for any
	      given environment.

              <h4>Source Code</h4>

              As with all good things in life, this was created for fun, free,
              and science. The full source code for this site is available on
              <a href="https://github.com/ChrisCummins/chriscummins.cc" target="_blank">GitHub</a>
              and is released under the terms of the MIT License. If you just
              want to see the JavaScript implementation of this genetics
              algorithm, see
	      <a href="https://github.com/ChrisCummins/chriscummins.cc/blob/master/assets/js/genetics.js.in" target="_blank">this file</a>.
            </div>

            <div id="pane-configuration" class="tab-pane well">

	      <div class="alert alert-info">
		<a href="#" class="close" data-dismiss="alert">&times;</a>
		This tab enables you to configure the parameters to be used for
		the genetics simulation.
	      </div>

              <table>
                <tr>
                  <td valign="top">
                    <h4>Genetics</h4>

                    Population Size<br />
                    <select id="population-size">
                      <option>1 (asexual reproduction)</option>
                      <option>20</option>
                      <option selected="selected">40</option>
                      <option>60</option>
                      <option>80</option>
                      <option>100</option>
                      <option>150</option>
                      <option>200</option>
                    </select>
                    <br />

                    Multation Chance<br />
                    <select id="mutation-chance">
                      <option>0.5%</option>
                      <option>1.0%</option>
                      <option selected="selected">1.5%</option>
                      <option>2.0%</option>
                      <option>2.5%</option>
                      <option>3.0%</option>
                      <option>5.0%</option>
                    </select>
                    <br />

                    Multation Amount<br />
                    <select id="mutation-amount">
                      <option>0%</option>
                      <option>5%</option>
                      <option selected="selected">10%</option>
                      <option>20%</option>
                      <option>30%</option>
                      <option>40%</option>
                      <option>50%</option>
                      <option>75%</option>
                      <option>100%</option>
                    </select>
                    <br />

                    Selection cutoff<br />
                    <select id="selection-cutoff">
                      <option>0%</option>
                      <option>5%</option>
                      <option>10%</option>
                      <option selected="selected">25%</option>
                      <option>35%</option>
                      <option>50%</option>
                      <option>75%</option>
                      <option>100%</option>
                    </select>
                    <br />

                    <label>
                      Kill parents
                      <input class="ios-switch" type="checkbox"
                             id="killparents" checked />
                    </label>

                  </td>
                  <td valign="top">
                    <h4>Graphics</h4>

                    Number of polygons<br />
                    <select id="polygons">
                      <option>1</option>
                      <option>5</option>
                      <option>25</option>
                      <option>50</option>
                      <option>100</option>
                      <option selected="selected">125</option>
                      <option>150</option>
                      <option>200</option>
                      <option>300</option>
                      <option>500</option>
                    </select>
                    <br />

                    Vertices<br />
                    <select id="vertices">
                      <option>3</option>
                      <option selected="selected">6</option>
                      <option>9</option>
                      <option>12</option>
                      <option>24</option>
                      <option>48</option>
                      <option>96</option>
                    </select>
                    <br />

                    Internal Resolution<br />
                    <select id="internal-resolution">
                      <option>25&times;25</option>
                      <option>50&times;50</option>
                      <option selected="selected">70&times;70</option>
                      <option>100&times;100</option>
                      <option>150&times;150</option>
                      <option>200&times;200</option>
                      <option>300&times;300</option>
                    </select>
                    <br />

                    <label>
                      Fill polygons
                      <input class="ios-switch" type="checkbox" id="fill-polygons"
                             checked />
                    </label>

                    <label>
                      Uniform crossover
                      <input class="ios-switch" type="checkbox" id="uniformcross"
                             checked/>
                    </label>

                    <label>
                      Difference squared
                      <input class="ios-switch" type="checkbox" id="diff-squared"
                             checked />
                    </label>

                  </td>
                </tr>
              </table>
            </div>

            <div id="pane-analytics" class="tab-pane well">

	      <div class="alert alert-info">
		<a href="#" class="close" data-dismiss="alert">&times;</a>
		This tab shows real time data from a running simulation.
	      </div>

	      <h4>Real Time Analysis</h4>

              <table id="analytics-table"
		     class="table table-bordered table-striped">
                <tr>
                  <td>Elapsed time</td>
		  <td id="elapsed-time"></td>
                </tr>
                <tr>
                  <td>Number of generations</td>
		  <td id="number-of-generations"></td>
                </tr>
                <tr>
                  <td>Average time per generation</td>
                  <td id="time-per-generation"></td>
                </tr>
                <tr>
                  <td>Average time per improvement</td>
                  <td id="time-per-improvement"></td>
                </tr>
                <tr>
                  <td>Current fitness</td>
                  <td id="current-fitness"></td>
                </tr>
                <tr>
                  <td>Highest fitness</td>
                  <td id="highest-fitness"></td>
                </tr>
                <tr>
                  <td>Lowest fitness</td>
                  <td id="lowest-fitness"></td>
                </tr>
              </table>

            </div>

            <div id="pane-results" class="tab-pane well">

	      <div class="alert alert-info">
		<a href="#" class="close" data-dismiss="alert">&times;</a>
		This tab shows you the results of a simulation when paused.
	      </div>

	      <h4>DNA string of strongest individual</h4>
              <textarea id="strongest-dna" class="text" readonly></textarea>

            </div>

          </div> <!-- /.tab-content -->
        </div> <!-- /.tabbale -->

        <hr style="margin-top: 20px">
        <div class="footer">
          <a href="/">chriscummins.cc</a> |
          &copy; 2013 Chris Cummins
        </div>
    </div>

    <!-- The hidden bits: -->
    <img id="referenceImage"
	 src="/genetics/mona-lisa.png"
	 style="display: none;" />

    <canvas id="workingCanvas"
	    width="1" height="1"
	    style="display: none;"></canvas>

    <form id="image-upload-form"
	  action="image-upload.php"
	  method="post" enctype="multipart/form-data">
      <input id="file-chooser" type="file" name="file" accept="image/*" />
    </form>

    <div class="underlay"></div>

    <!-- TODO: not yet implemented -->
    <!-- <div id="null" style="display: none;"></div> -->

    <!-- the webcam uploading section -->
    <div class="webcam-overlay">

      <center>
	<!-- webcam preview window -->
	<div id="webcam-preview"></div>

	<!-- webcam buttons -->
	<form style="margin-top: 10px">
          <input class="btn btn-inverse" type=button value="Configure"
		 onClick="webcam.configure()">
          &nbsp;&nbsp;
          <input class="btn btn-inverse" type=button value="Take Snapshot"
		 onClick="webcamTakeSnapshot()">
	</form>
      </center>

    </div>

  </body>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
  <script src="/assets/js/webcam.js"></script>
  <script src="/assets/js/genetics.js"></script>

</html>
